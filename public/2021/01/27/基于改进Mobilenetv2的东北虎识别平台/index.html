<!DOCTYPE html>
<html lang="en">

<!-- Head tag (contains Google-Analytics、Baidu-Tongji)-->
<head>
  <!-- Google Analytics -->
  
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-xxxxxx-xx"></script>
    <script type="text/javascript">
      window.dataLayer = window.dataLayer || [];

      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'UA-xxxxxx-xx');
    </script>
  

  <!-- Baidu Tongji -->
  
    <script type="text/javascript">
      // Originial
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  <!-- Baidu Push -->
  
    <script>
      (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
      })();
    </script>
  

  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

  <meta name="google-site-verification" content="lxDfCplOZbIzjhG34NuQBgu2gdyRlAtMB4utP5AgEBc"/>
  <meta name="baidu-site-verification" content="PpzM9WxOJU"/>

  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="It&#39;s an IT blog..."/>
  <meta name="keyword" content="Bin&#39;s Blog"/>
  <link rel="shortcut icon" href="/img/avatar/Bin.jpg"/>

  <!-- Place this tag in your head or just before your close body tag. -->
  <script async="async" defer="defer" src="https://buttons.github.io/buttons.js"></script>

  
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/beantech.min.css"/>

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css"/>
    <link rel="stylesheet" href="/css/widget.css"/>
    <link rel="stylesheet" href="/css/rocket.css"/>
    <link rel="stylesheet" href="/css/signature.css"/>
    <link rel="stylesheet" href="/css/catalog.css"/>
    <link rel="stylesheet" href="/css/livemylife.css"/>

    
      <!-- wave start -->
      <link rel="stylesheet" href="/css/wave.css"/>
      <!-- wave end -->
    

    
      <!-- top start (article top hot config) -->
      <link rel="stylesheet" href="/css/top.css"/>
      <!-- top end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/scroll.css"/>
      <!-- ThemeColor end -->
    

    
      <!-- viewer start (Picture preview) -->
      <link rel="stylesheet" href="/css/viewer.min.css"/>
      <!-- viewer end -->
    

    
      <!-- Search start -->
      <link rel="stylesheet" href="/css/search.css"/>
      <!-- Search end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/themecolor.css"/>
      <!-- ThemeColor end -->
    

    

    
      <!-- gitalk start -->
      <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"> -->
      <link rel="stylesheet" href="/css/gitalk.css"/>
      <!-- gitalk end -->
    
  

  <!-- Custom Fonts -->
  <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
  <!-- Hux change font-awesome CDN to qiniu -->
  <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" type="text/css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Hux Delete, sad but pending in China <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'> <link
  href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/ css'> -->

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script> <![endif]-->

  <!-- ga & ba script hoook -->
  <link rel="canonical" href="http://yoursite-url/2021/01/27/基于改进Mobilenetv2的东北虎识别平台/">
  <title>
    
      基于改进Mobilenetv2的东北虎识别平台 - Bin&#39;s Blog
    
  </title>
<meta name="generator" content="Hexo 5.4.0"></head>


<!-- hack iOS CSS :active style -->

	<body ontouchstart="" class="body--light body--light">


		<!-- ThemeColor -->
		
		<!-- ThemeColor -->
<style type="text/css">
  .body--light {
    --light-mode: none;
    --dark-mode: block;
  }
  .body--dark {
    --light-mode: block;
    --dark-mode: none;
  }
  i.mdui-icon.material-icons.light-mode {
    display: var(--light-mode);
  }
  i.mdui-icon.material-icons.dark-mode {
    display: var(--dark-mode);
  }
</style>
<div class="toggle" onclick="document.body.classList.toggle('body--dark')">
  <i class="mdui-icon material-icons light-mode"></i>
  <i class="mdui-icon material-icons dark-mode"></i>
</div>
<script>
  //getCookieValue
  function getCookieValue(a) {
    var b = document.cookie.match('(^|[^;]+)\\s*' + a + '\\s*=\\s*([^;]+)');
    return b
      ? b.pop()
      : '';
  }
  let themeMode = 'light';
  if (getCookieValue('sb-color-mode') && (getCookieValue('sb-color-mode') !== themeMode)) {
    let dbody = document.body.classList;
    themeMode === 'dark' ? dbody.remove('body--dark') : dbody.add('body--dark');
  }

  //setCookieValue
  var toggleBtn = document.querySelector(".toggle");
  toggleBtn.addEventListener("click", function () {
    var e = document.body.classList.contains("body--dark");
    var cookieString = e
      ? "dark"
      : "light";
    var exp = new Date();
    exp.setTime(exp.getTime() + 3 * 24 * 60 * 60 * 1000); //3天过期
    document.cookie = "sb-color-mode=" + cookieString + ";expires=" + exp.toGMTString() + ";path=/";
  });
</script>

		

		<!-- Gitter -->
		
		<!-- Gitter -->
<!-- Docs:https://gitter.im/?utm_source=left-menu-logo -->
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'your-community/your-room'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>

		

		<!-- Navigation (contains search)-->
		<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">An Ordinary Life</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <!-- Known Issue, found by Hux: <nav>'s height woule be hold on by its content. so, when navbar scale out, the <nav> will cover tags. also mask any touch event of tags, unfortunately. -->
    <div id="huxblog_navbar">
      <div class="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/">HOME</a>
          </li>

          
          
          <li>
            <a href="/about/">
              
              ABOUT
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/categories/">
              
              CATEGORIES
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/archive/">
              
              ARCHIVES
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/tags/">
              
              TAGS
              
              
            </a>
          </li>
          
          
          
          

          
          <li>
            <a class="popup-trigger">
              <span class="search-icon"></span>SEARCH</a>
          </li>
          

          <!-- LangSelect -->
          
        </ul>
      </div>
    </div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container -->
</nav>
<!-- progress -->
<div id="progress">
  <div class="line" style="width: 0%;"></div>
</div>

<script>
  // Drop Bootstarp low-performance Navbar Use customize navbar with high-quality material design animation in high-perf jank-free CSS3 implementation
  var $body = document.body;
  var $toggle = document.querySelector('.navbar-toggle');
  var $navbar = document.querySelector('#huxblog_navbar');
  var $collapse = document.querySelector('.navbar-collapse');

  $toggle.addEventListener('click', handleMagic)

  function handleMagic(e) {
    if ($navbar.className.indexOf('in') > 0) {
      // CLOSE
      $navbar.className = " ";
      // wait until animation end.
      setTimeout(function() {
        // prevent frequently toggle
        if ($navbar.className.indexOf('in') < 0) {
          $collapse.style.height = "0px"
        }
      }, 400)
    } else {
      // OPEN
      $collapse.style.height = "auto"
      $navbar.className += " in";
    }
  }
</script>


		<!-- Post Header (contains intro-header、signature、wordcount、busuanzi、waveoverlay) -->
		<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->

  <style type="text/css">
    .body--light {
      /* intro-header */
      --intro-header-background-image-url-home: url('/img/header_img/newhome_bg.jpg');
      --intro-header-background-image-url-post: url('/img/header_img/tiger.png');
      --intro-header-background-image-url-page: url('//img/header_img/tiger.png');
    }
    .body--dark {
      --intro-header-background-image-url-home: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/header_img/newhome_bg.jpg');
      --intro-header-background-image-url-post: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/header_img/tiger.png');
      --intro-header-background-image-url-page: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('//img/header_img/tiger.png');
    }

    header.intro-header {
       /*post*/
        background-image: var(--intro-header-background-image-url-post);
        /* background-image: url('/img/header_img/tiger.png'); */
      
    }

    
  </style>





<header class="intro-header">
  <!-- Signature -->
  <div id="signature">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          
          <div class="post-heading">
            <div class="tags">
              
              <a class="tag" href="/tags/#Python" title="Python">Python</a>
              
              <a class="tag" href="/tags/#Django" title="Django">Django</a>
              
            </div>
            <h1>基于改进Mobilenetv2的东北虎识别平台</h1>
            <h2 class="subheading">人工智能创意赛参赛作品</h2>
            <span class="meta">
              Posted by Mr.Li on
              2021-01-27
            </span>


            
            <!-- WordCount start -->
            <div class="blank_box"></div>
            <span class="meta">
              Estimated Reading Time <span class="post-count">9</span> Minutes
            </span>
            <div class="blank_box"></div>
            <span class="meta">
              Words <span class="post-count">2.7k</span> In Total
            </span>
            <div class="blank_box"></div>
            <!-- WordCount end -->
            
            


          </div>
          
        </div>
      </div>
    </div>
  </div>

  
  <!-- waveoverlay start -->
  <div class="preview-overlay">
    <svg class="preview-waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
      <defs>
        <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path>
      </defs>
      <g class="preview-parallax">
        <use xlink:href="#gentle-wave" x="48" y="0" fill=var(--gentle-wave1)></use>
        <use xlink:href="#gentle-wave" x="48" y="3" fill=var(--gentle-wave2)></use>
        <use xlink:href="#gentle-wave" x="48" y="5" fill=var(--gentle-wave3)></use>
        <use xlink:href="#gentle-wave" x="48" y="7" fill=var(--gentle-wave)></use>
      </g>
    </svg>
  </div>
  <!-- waveoverlay end -->
  

</header>



		<!-- Main Content (Post contains
	Pager、
	tip、
	socialshare、
	gitalk、gitment、disqus-comment、
	Catalog、
	Sidebar、
	Featured-Tags、
	Friends Blog、
	anchorjs、
	) -->
		<!-- Modify by Yu-Hsuan Yen -->
<!-- Post Content -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div class="col-lg-8 col-lg-offset-1 col-md-10 col-md-offset-1 post-container">

        <blockquote>
<p>项目基于从ABS拿到的东北虎数据集而建立，改进基于PaddlePaddle 的Mobilenetv2 模型并使用Django 搭建实时的野外东北虎监测平台，将摄像头传回的视频进行实时地处理后，返回给前端来实现可视化展示。和另外两位队友在短时间之内搭建的平台，最终在人工智能创意赛的全国决赛取得了三等奖的成绩，但是这个成绩好像并不重要哈哈。浙江三日游成为了在疫情笼罩下的2020年少有的精彩回忆之一，也是2020年的一个转折点吧。</p>
</blockquote>
<h2 id="项目简介"><a href="#项目简介" class="headerlink" title="项目简介"></a>项目简介</h2><p>本项目应用方向是野生动物保护，我们团队基于百度飞桨平台开发野生东北虎的识别与监测系统。通过自主收集的东北虎数据集完成模型训练。在未来该平台将于与摄像系统结合，广泛应用于野生动物自然保护区，结合大数据、人工智能等进一步对东北虎个体及其他物种进行目标识别、数量统计、实时监测，位置记录，有效地进行东北虎的监测与保护工作。</p>
<p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/2.png" alt="2"></p>
<h2 id="项目技术内容"><a href="#项目技术内容" class="headerlink" title="项目技术内容"></a>项目技术内容</h2><h3 id="数据集"><a href="#数据集" class="headerlink" title="数据集"></a>数据集</h3><p>我们在学校实验室的支持下，结合互联网和实地考察，我们收集并创建了自主的东北虎数据集，一共有4621张图片，使用labelme标注东北虎框一共7321个。</p>
<p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/3.png" alt="3"></p>
<h3 id="项目实现思路"><a href="#项目实现思路" class="headerlink" title="项目实现思路"></a>项目实现思路</h3><p>考虑到我们是一个实时的监测平台，对预测速度有一定的要求，并且需要模型易于部署，我们选择了基于Mobilenet v2的改进模型。本项目可分为两部分组成，一是通过基于改进Mobilenet v2的目标识别模型，二是基于Django搭建起来的实时野外东北虎监测平台，将摄像头传回的视频进行实时地处理后，返回给前端来实现可视化展示。</p>
<p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/4.png" alt="4"></p>
<h3 id="算法改进"><a href="#算法改进" class="headerlink" title="算法改进"></a>算法改进</h3><p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/5.png" alt="5"></p>
<p>传统的 SSD 网络在提取的特征图上直接进行回归和分类，易造成目标的分类定位错误而降低检测的准确率。SSD 算法用低层特征图检测小目标，高层特征图检测大目标，低层卷积层分辨率高但语义信息低、感受野较小，小目标特征提取不充分；高层卷积层语义信息充分、感受野较大，可提取更多特征信息。</p>
<p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/6.png" alt="6"></p>
<p>针对这个问题，我们将 RPN 网络引入进 SSD 网络，使用传输转换模块将两个网络相连接，从而构建出一种新的SSD网络。同时继承一步式和两步式检测方法的优点，在RPN经过细化的先验框基础上进行回归反卷积，使特征相融合，传输给SSD网络。在RPN经过细化的先验框基础上进行回归反卷积，使特征相融合，集成大规模上下文信息，增大感受野，增加低层网络的语义信息，提高检测精度。</p>
<p>这一步骤有效地删除一些负样本先验框，减小分类器的搜索范围，降低目标分类或定位的错误率，为 SSD网络的回归操作提供更好的前提条件。</p>
<p>在特征融合上，在MobileNetv2模型的基础框架上，对 Conv3_3、Conv4_3、fc7、Conv6_1、Conv7_1、Conv9_2 特征层，用 padding=0 的 1×1 卷积核做卷积操作，保证了融合时的通道统一，然后使用双线性插值使特征图大小统一。最后采用连接融合的方式得到了不同大小的特征图，改进后的模型较MobileNetv2模型的特征层语义信息更丰富，能更好地表达目标特征。</p>
<p>同时为了增强浅层网络对小目标的检测能力。我们将 Smin 和 Smax 的值调整为 0.15，0.95，预测框的IOU 设置为 0.45，NMS 设置为 0.4，这样能够有效避免由于目标过小导致在训练阶段，真实标签无法找到相应地先验框与之匹配的问题。</p>
<h3 id="算法对比"><a href="#算法对比" class="headerlink" title="算法对比"></a>算法对比</h3><p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/7.png" alt="7"></p>
<p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/8.png" alt="8"></p>
<p>在算法对比中可以看到，迭代 1 万次时，MobileNetv2网络的准确率只有78.62%，而改进后的网络准确率可达到 83.26%，迭代 6 万次逐渐趋于稳定，但是改进后的网络准确率始终高于原网络，最高可达90.86%。</p>
<p>我们用同一数据集进行了横向对比，改进后的网络 mAP 为91.86%。相比于Faster R-CNN 模型，检测精度提升了 10.26%；相比于 YOLO V4模型，检测精度提高了2.97%，检测速度提高了7.3FPS；相比于MobileNetv2模型，检测精度提高了 5.12%。</p>
<h3 id="成果展示"><a href="#成果展示" class="headerlink" title="成果展示"></a>成果展示</h3><h4 id="园区监控终端"><a href="#园区监控终端" class="headerlink" title="园区监控终端"></a>园区监控终端</h4><p>基于我们训练得到的模型，我们搭建了适用于自然保护区的智能监测平台。我们将通过规划后在区域内设置一定数量的摄像头用于实时监测，摄像头将搭载我们训练的识别模型，进行实时的识别和跟踪，标记出被识别的目标，并将信息传输给后台，供工作人员查看数据。</p>
<p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/9.png" alt="9"></p>
<center class="half">    <img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/10.png" width="500">   </center>



<p>同时，系统会对识别到的东北虎进行持续的标记跟踪，密切关注每一只东北虎个体，记录其基本情况。通过串联园区内各个位置的摄像头，系统会自动绘制园区内每只东北虎的行为轨迹图，并以地图可视化的方式展现出来。一旦摄像头监测到东北虎出现异常状况或行为轨迹图可疑，系统将自动上报给后台工作人员，以便及时处理。</p>
<center class="half">    <img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/11.png" width="500">    <img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/12.png" width="500"> </center>

<h4 id="一些展望"><a href="#一些展望" class="headerlink" title="一些展望"></a>一些展望</h4><p>完成该项目所需要的技术算是比较基础的，而在我们的前期调查中发现，相关的产品并没有广泛应用于自然保护区和动物园，不知道是出于成本的原因还是什么。我认为相关的产品或是项目可以广泛应用于各个自然保护区，基于不同的数据集，对不同种类的动物进行监测。如果可以争取与政府的动物保护部门达成合作，以进行进一步的推广，弥补现有的市场空缺，从而广泛应用国内各类自然保护区中。</p>
<p>对于野生动物的纪录片拍摄以及各种野生动物科研，这样的系统依然有着非常显著的作用。我们可以利用相关系统更快地找到野生动物的栖息地和活动轨迹，以便于更好的拍摄和研究。同时大大减少了相关人员花在寻找东北虎的时间和精力上，大大加快了效率。</p>
<p>想法是好的，希望在未来的日子里中可以有人能够实现这样的想法。</p>
<h2 id="关于人工智能创意赛"><a href="#关于人工智能创意赛" class="headerlink" title="关于人工智能创意赛"></a>关于人工智能创意赛</h2><h3 id="GEEK-YOUTH集训营"><a href="#GEEK-YOUTH集训营" class="headerlink" title="GEEK YOUTH集训营"></a>GEEK YOUTH集训营</h3><p>2020年参加了很多的比赛哈，人工智能创意赛是我个人认为主办方非常良心的比赛之一。在得知了我们进入全国决赛之后，百度公司举行了GEEK YOUTH线上集训营，三天的讲解可谓是收获满满，请到了非常多很厉害的教授，我们也可以直面Paddlepaddle的技术人员，深入了解这个平台。如果没有疫情，应该会飞去北京参加线下的集训营，又是一场三天的白嫖旅行，也算蛮可惜的。因为可能记笔记比较认真，在最后的时候也作为代表表达了自己对集训营的一些看法，照片吗，网上好像直接搜我名字能搜到就不贴了。</p>
<p>最后也收到了来自组委会的两波良心大礼包，赞:slightly_smiling_face:</p>
<p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/14.jpeg" alt="14"></p>
<p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/15.jpg" alt="15"></p>
<h3 id="杭州决赛行"><a href="#杭州决赛行" class="headerlink" title="杭州决赛行"></a>杭州决赛行</h3><p>在第一天下飞机之后，我们来到了决赛举办的酒店，感觉应该是个旅游度假村，面积和江安的宿舍区有得一比。组委会安排住的是1500一天的别墅啊啊啊啊啊啊，直接震惊到爆炸，来几张图表示敬意。中午去恰了杭帮菜还算不错，下午逛了逛酒店，整个度假村的风景还算蛮不错的，本来两人一间房，但是我的室友并没有来（一人一间房很爽），于是便有了后来的夜宵局哈哈。</p>
<p>整个决赛显得非常的专业，来了很多专业的教授和院士，现在想来没有去问问保研信息还蛮后悔的。在经历了第二天一整天紧张刺激的答辩(吹牛)后(下午溜出去到西湖玩了)，本来想去体验一下杭州的夜生活，奈何晚上九点街上就已经空空荡荡，于是小酌两杯后回到了酒店。结果在阿杜的鼓吹下，氪了一手原神，本来是钟离的up池，没想到保底出了一发七七，孙宝的运气可不是人人都有，生活总会有点意外。</p>
<p>第三天在杭州的机器人小镇举行了颁奖仪式，颁奖典礼后便是一个峰会，还是认真听了一部分，机器人小镇的很多东西也蛮好玩的。第三天晚上参加了晚宴，非常豪华，本来和uncle说的是想和班主任小姐姐合张影，后来又怂了。当天成都发生了五角星事件还一度担心能不能正常回学校，而第四天中午便乘飞机回了学校，过程也挺顺畅。</p>
<p>杭州行并没有留下什么谈得上的遗憾，留下了一堆不成文的照片。</p>
<p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/16.jpg" alt="16"></p>
<p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/17.jpg" alt="17"></p>
<p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/18.jpg" alt="18"></p>
<p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/19.jpg" alt="19"></p>
<p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/20.jpg" alt="20"></p>
<p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/21.jpg" alt="21"></p>
<p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/24.jpg" alt="24"></p>
<p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/25.jpg" alt="25"></p>
<p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/26.jpg" alt="26"></p>
<p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/27.jpg" alt="27"></p>
<p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/28.jpg" alt="28"></p>
<p><img src="/2021/01/27/%E5%9F%BA%E4%BA%8E%E6%94%B9%E8%BF%9BMobilenetv2%E7%9A%84%E4%B8%9C%E5%8C%97%E8%99%8E%E8%AF%86%E5%88%AB%E5%B9%B3%E5%8F%B0/29.jpg" alt="29"></p>
<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>感谢两位队友uncle悦和阿杜的付出，这个项目并没有花费我们太多的时间，所以最终能拿到这样的结果也算非常满意了。同时我们也明白了，在与其他学校的项目对比中，我们由于从来没有接触过硬件相关的知识，也没有硬件可以展示，在PK中会显得比较薄弱，这可能也是纯软件的一些弱势吧，希望在之后的学习中能够接触到有关硬件的一些知识，得到一些进步。</p>
<p>最后附上参赛作品的三分钟链接，阿杜在寝室剪辑的，现在看上去确实还蛮憨憨的，纪念意义还是拉满：</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1PX4y1K7TC">SCUCS_01</a>：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1PX4y1K7TC">https://www.bilibili.com/video/BV1PX4y1K7TC</a></p>
<div style="position: relative; padding: 30% 45%;">     
    <iframe style="         position: absolute;          width: 100%;          height: 100%;          left: 0; top: 0;" src="//player.bilibili.com/player.html?aid=713571339&bvid=BV1PX4y1K7TC&cid=279720799&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true">     </iframe> 
</div>



        <hr>
        <!-- Pager -->
        <ul class="pager">
          
          <li class="previous">
            <a href="/2021/01/28/关于使用Vercel和hexo搭建个人主页/" data-toggle="tooltip" data-placement="top" title="关于使用Vercel和hexo搭建个人主页">&larr; Previous Post</a>
          </li>
          
          
          <li class="next">
            <a href="/2021/01/27/基于Yolov4和Deepsort的智能交通场景应用/" data-toggle="tooltip" data-placement="top" title="基于Yolov4和Deepsort的智能交通场景应用">Next Post &rarr;</a>
          </li>
          
        </ul>

        
        <!-- tip start -->
        <!-- tip -->
<!-- tip start -->
<div class="tip">
  <p>
    
      If you like this blog or find it useful for you, you are welcome to comment on it. You are also welcome to share this blog, so that more people can participate in it. If the images used in the blog infringe your copyright, please contact the author to delete them. Thank you !
    
  </p>
</div>
<!-- tip end -->

        <!-- tip end -->
        

        
        <!-- Sharing Srtart -->
        <!-- Social Social Share Post -->
<!-- Docs:https://github.com/overtrue/share.js -->

<div class="social-share" data-initialized="true" data-disabled="tencent ,douban ,qzone ,linkedin ,facebook ,google ,diandian" data-wechat-qrcode-helper="" align="center">
  <ul class="list-inline text-center social-share-ul">
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-twitter">
        <i class="fa fa-twitter fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a class="social-share-icon icon-wechat">
        <i class="fa fa-weixin fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-weibo">
        <i class="fa fa-weibo fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-qq">
        <i class="fa fa-qq fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon" href="mailto:?subject=基于改进Mobilenetv2的东北虎识别平台&body=Hi,I found this website and thought you might like it http://yoursite-url/2021/01/27/基于改进Mobilenetv2的东北虎识别平台/">
        <i class="fa fa-envelope fa-1x" aria-hidden="true"></i>
      </a>
    </li>
  </ul>
</div>

<!-- css & js -->
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css"> -->
<script defer="defer" async="true" src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>

        <!-- Sharing End -->
        
        <hr>

        <!-- comments start -->
        <!-- 1. gitalk comment -->

  <!-- gitalk start -->
  <!-- Docs:https://github.com/gitalk/gitalk/blob/master/readme-cn.md -->

  <div id="gitalk-container"></div>

  
    <!-- <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.js"></script> -->
    <script src="/js/comment/gitalk.js"></script>
  

  <script>
    var gitalk = new Gitalk({
      clientID: '65682c9d7fede4bb7fc5',
      clientSecret: '6b9080be7fdcaae6ae9bbd667c4d2af5f16eb118',
      repo: 'lhb7.github.io',
      owner: 'lhb7',
      admin: 'lhb7',
      id: 'Wed Jan 27 2021 22:53:27 GMT+0800', // Ensure uniqueness and length less than 50
      distractionFreeMode: false, // Facebook-like distraction free mode
      perPage: 10,
      pagerDirection: 'last',
      createIssueManually: true,
      language: 'zh-CN',
      proxy: 'https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token'
    });
    gitalk.render('gitalk-container');

    var gtFolded = () => {
      setTimeout(function () {
        let markdownBody = document.getElementsByClassName("markdown-body");
        let list = Array.from(markdownBody);
        list.forEach(item => {
          if (item.clientHeight > 250) {
            item.classList.add('gt-comment-body-folded');
            item.style.maxHeight = '250px';
            item.title = 'Click to Expand';
            item.onclick = function () {
              item.classList.remove('gt-comment-body-folded');
              item.style.maxHeight = '';
              item.title = '';
              item.onclick = null;
            };
          }
        })
      }, 800);
    }
  </script>

  <!-- gitalk end -->


<!-- 2. gitment comment -->


<!-- 3. disqus comment -->


        <!-- comments end -->
        <hr>

      </div>

      <!-- Catalog: Tabe of Content -->
      <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E9%A1%B9%E7%9B%AE%E7%AE%80%E4%BB%8B"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">项目简介</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E9%A1%B9%E7%9B%AE%E6%8A%80%E6%9C%AF%E5%86%85%E5%AE%B9"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">项目技术内容</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%95%B0%E6%8D%AE%E9%9B%86"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text">数据集</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E9%A1%B9%E7%9B%AE%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"><span class="toc-nav-number">2.2.</span> <span class="toc-nav-text">项目实现思路</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E7%AE%97%E6%B3%95%E6%94%B9%E8%BF%9B"><span class="toc-nav-number">2.3.</span> <span class="toc-nav-text">算法改进</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E7%AE%97%E6%B3%95%E5%AF%B9%E6%AF%94"><span class="toc-nav-number">2.4.</span> <span class="toc-nav-text">算法对比</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%88%90%E6%9E%9C%E5%B1%95%E7%A4%BA"><span class="toc-nav-number">2.5.</span> <span class="toc-nav-text">成果展示</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%9B%AD%E5%8C%BA%E7%9B%91%E6%8E%A7%E7%BB%88%E7%AB%AF"><span class="toc-nav-number">2.5.1.</span> <span class="toc-nav-text">园区监控终端</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E4%B8%80%E4%BA%9B%E5%B1%95%E6%9C%9B"><span class="toc-nav-number">2.5.2.</span> <span class="toc-nav-text">一些展望</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%85%B3%E4%BA%8E%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E5%88%9B%E6%84%8F%E8%B5%9B"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">关于人工智能创意赛</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#GEEK-YOUTH%E9%9B%86%E8%AE%AD%E8%90%A5"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">GEEK YOUTH集训营</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%9D%AD%E5%B7%9E%E5%86%B3%E8%B5%9B%E8%A1%8C"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">杭州决赛行</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%90%8E%E8%AE%B0"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">后记</span></a></li></ol>
        
        </div>
      </aside>
    



      <!-- Sidebar Container -->
      <div class="
                col-lg-8 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

        <!-- Featured Tags -->
        
        <section>
          <!-- no hr -->
          <h5>
            <a href="/tags/">FEATURED TAGS</a>
          </h5>
          <div class="tags">
            
            <a class="tag" href="/tags/#Python" title="Python">Python</a>
            
            <a class="tag" href="/tags/#Django" title="Django">Django</a>
            
          </div>
        </section>
        

        <!-- Friends Blog -->
        
        <hr>
        <h5>FRIENDS</h5>
        <ul class="list-inline">

          
          <li>
            <a href="https://soptq.me/" target="_blank">Soptq</a>
          </li>
          
          <li>
            <a href="http://beantech.org" target="_blank">Bean Tech</a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</article>



<!-- anchorjs start -->
<!-- async load function -->
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script type="text/javascript">
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function(e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  };
</script>
<script type="text/javascript">
  //anchor-js, Doc:http://bryanbraun.github.io/anchorjs/
  async ("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js", function() {
    anchors.options = {
      visible: 'hover',
      placement: 'left',
      // icon: 'ℬ'
      icon: '❡'
    };
    anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
  });
</script>
<style>
  /* place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: -0.1em;
    }
  }
</style>

<!-- anchorjs end -->



		<!-- Footer (contains ThemeColor、viewer) -->
		<!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center">
          

          
            <li>
              <a target="_blank" href="https://github.com/lhb7">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          

          

          

          

          

          
            <li>
              <a target="_blank" href="https://www.zhihu.com/people/BinBin">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa  fa-stack-1x fa-inverse">知</i>
                </span>
              </a>
            </li>
          

          

        </ul>
        <p class="copyright text-muted">
          Copyright &copy;
          Mr.Li
          2022
          <br>
          Theme by
          <a target="_blank" rel="noopener" href="http://beantech.org">BeanTech</a>
          <span style="display: inline-block; margin: 0 5px;">
            <i class="fa fa-heart"></i>
          </span>
          re-Ported by
          <a target="_blank" rel="noopener" href="https://v-vincen.life/">Live My Life</a>
          |
          <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0" width="91px" height="20px" src="https://ghbtns.com/github-btn.html?user=V-Vincen&repo=V-Vincen.github.io&type=star&count=true"></iframe>
        </p>
      </div>
    </div>
  </div>
</footer>

<a id="rocket" href="#top" class=""></a>


  <!-- jQuery -->
  <script type="text/javascript" src="/js/jquery.min.js"></script>
  <!-- Bootstrap Core JavaScript -->
  <script type="text/javascript" src="/js/bootstrap.min.js"></script>
  <!-- Custom Theme JavaScript -->
  <script type="text/javascript" src="/js/hux-blog.min.js"></script>
  <!-- catalog -->
  <script async="true" type="text/javascript" src="/js/catalog.js"></script>
  <!-- totop(rocket) -->
  <script async="true" type="text/javascript" src="/js/totop.js"></script>

  

  
    <!-- Scroll start -->
    <script async="async" type="text/javascript" src="/js/scroll.js"></script>
    <!-- Scroll end -->
  

  

  
    <!-- Mouseclick -->
    <script type="text/javascript" src="/js/mouseclick.js" content='The first step is as good as half over...,Laugh and grow fat...,Man proposes God disposes...,When all else is lost the future still remains...,Wasting time is robbing oneself...,Sharp tools make good work...,Cease to struggle and you cease to live...,A friend in need is a friend indeed...,Faith can move mountains...' color='#9933CC,#339933,#66CCCC,#FF99CC,#CCCCFF,#6666CC,#663399,#66CC99,#FF0033'></script>
  

  
    <!-- ribbon -->
    <script type="text/javascript" src="/js/ribbonDynamic.js"></script>
  

  






  <!-- viewer start -->
  <!-- viewer start (Picture preview) -->
  
    <script async="async" type="text/javascript" src="/js/viewer/viewer.min.js"></script>
    <script async="async" type="text/javascript" src="/js/viewer/pic-viewer.js"></script>
  

  <!-- viewer end -->


<script>
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function (e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  }

  // fastClick.js
  async ("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function () {
    var $nav = document.querySelector("nav");
    if ($nav)
      FastClick.attach($nav);
    }
  )
</script>

<!-- Because of the native support for backtick-style fenced code blocks right within the Markdown is landed in Github Pages, From V1.6, There is no need for Highlight.js, so Huxblog drops it officially. -
https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0 - https://help.github.com/articles/creating-and-highlighting-code-blocks/ -->
<!-- <script> async ("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function () { hljs.initHighlightingOnLoad(); }) </script> <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet"> -->

<!-- jquery.tagcloud.js -->
<!-- <script> // only load tagcloud.js in tag.html if ($('#tag_cloud').length !== 0) { async ("http://yoursite-url/js/jquery.tagcloud.js", function () { $.fn.tagcloud.defaults = { // size: { start: 1, end: 1, unit: 'em' }, color: {
start: '#bbbbee', end: '#0085a1' } }; $('#tag_cloud a').tagcloud(); }) } </script> -->


		<!-- Search -->
		
		<div class="popup search-popup local-search-popup">
  <span class="popup-btn-close">
    ESC
  </span>
  <div class="container">
    <div class="row">
      <!-- <div class="col-md-9 col-md-offset-1"> -->
      <div class="col-lg-9 col-lg-offset-1 col-md-10 col-md-offset-1 local-search-content">

        <div class="local-search-header clearfix">

          <div class="local-search-input-wrapper">
            <span class="search-icon">
              <i class="fa fa-search fa-lg" style="margin: 25px 10px 25px 20px;"></i>
            </span>
            <input autocomplete="off" placeholder="SEARCH..." type="text" id="local-search-input">
          </div>
        </div>
        <div id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>


  
    <script src="/js/ziploader.js"></script>
  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    // monitor main search box;
    var onPopupClose = function (e) {
      $('.popup').fadeOut(300);
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $('.popup').fadeIn(300);
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }
    // get search zip version
    $.get('/searchVersion.json?t=' + (+new Date()), function (res) {
      if (localStorage.getItem('searchVersion') !== res) {
        localStorage.setItem('searchVersion', res);
        initSearchJson();
      }
    });

    function initSearchJson() {
      initLoad(['/search.flv'], {
        loadOptions: {
          success: function (obj) {
            localStorage.setItem('searchJson', obj['search.json'])
          },
          error: function (e) {
            return console.log(e)
          }
        },
        returnOptions: {
          'json': TYPE_TEXT
        },
        mimeOptions: {
          'json': 'application/json'
        }
      })
    }
    // search function;
    var searchFunc = function (search_id, content_id) {
      'use strict';
      isfetched = true;
      var datas = JSON.parse(localStorage.getItem('searchJson'));
      // console.log(search_id)
      var input = document.getElementById(search_id);
      var resultContent = document.getElementById(content_id);
      var inputEventFunction = function () {
        var searchText = input.value.trim().toLowerCase();
        var keywords = searchText.split(/[\s\-]+/);
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        var resultItems = [];
        if (searchText.length > 0) {
          // perform local searching
          datas.forEach(function (data) {
            var isMatch = false;
            var hitCount = 0;
            var searchTextCount = 0;
            var title = data.title
              ? data.title.trim()
              : '';
            var titleInLowerCase = title.toLowerCase();
            var content = data.content
              ? data.content.trim().replace(/<[^>]+>/g, "")
              : '';
            var contentInLowerCase = content.toLowerCase();
            var articleUrl = decodeURIComponent(data.url);

            var date = data.date;
            var dateTime = date.replace(/T/, " ").replace(/.000Z/, "");
            var imgUrl = data.header_img;
            


            var indexOfTitle = [];
            var indexOfContent = [];
            // only match articles with not empty titles
            keywords.forEach(function (keyword) {
              function getIndexByWord(word, text, caseSensitive) {
                var wordLen = word.length;
                if (wordLen === 0) {
                  return [];
                }
                var startPosition = 0,
                  position = [],
                  index = [];
                if (!caseSensitive) {
                  text = text.toLowerCase();
                  word = word.toLowerCase();
                }
                while ((position = text.indexOf(word, startPosition)) > -1) {
                  index.push({position: position, word: word});
                  startPosition = position + wordLen;
                }
                return index;
              }
              indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
              indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
            });
            if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
              isMatch = true;
              hitCount = indexOfTitle.length + indexOfContent.length;
            }
            // show search results
            if (isMatch) {
              // sort index by position of keyword
              [indexOfTitle, indexOfContent].forEach(function (index) {
                index.sort(function (itemLeft, itemRight) {
                  if (itemRight.position !== itemLeft.position) {
                    return itemRight.position - itemLeft.position;
                  } else {
                    return itemLeft.word.length - itemRight.word.length;
                  }
                });
              });
              // merge hits into slices
              function mergeIntoSlice(text, start, end, index) {
                var item = index[index.length - 1];
                var position = item.position;
                var word = item.word;
                var hits = [];
                var searchTextCountInSlice = 0;
                while (position + word.length <= end && index.length != 0) {
                  if (word === searchText) {
                    searchTextCountInSlice++;
                  }
                  hits.push({position: position, length: word.length});
                  var wordEnd = position + word.length;
                  // move to next position of hit
                  index.pop();
                  while (index.length != 0) {
                    item = index[index.length - 1];
                    position = item.position;
                    word = item.word;
                    if (wordEnd > position) {
                      index.pop();
                    } else {
                      break;
                    }
                  }
                }
                searchTextCount += searchTextCountInSlice;
                return {hits: hits, start: start, end: end, searchTextCount: searchTextCountInSlice};
              }
              var slicesOfTitle = [];
              if (indexOfTitle.length != 0) {
                slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
              }
              var slicesOfContent = [];
              while (indexOfContent.length != 0) {
                var item = indexOfContent[indexOfContent.length - 1];
                var position = item.position;
                var word = item.word;
                // cut out 100 characters
                var start = position - 20;
                var end = position + 80;
                if (start < 0) {
                  start = 0;
                }
                if (end < position + word.length) {
                  end = position + word.length;
                }
                if (end > content.length) {
                  end = content.length;
                }
                slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
              }
              // sort slices in content by search text's count and hits' count
              slicesOfContent.sort(function (sliceLeft, sliceRight) {
                if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                  return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                  return sliceRight.hits.length - sliceLeft.hits.length;
                } else {
                  return sliceLeft.start - sliceRight.start;
                }
              });
              // select top N slices in content
              var upperBound = parseInt('1');
              if (upperBound >= 0) {
                slicesOfContent = slicesOfContent.slice(0, upperBound);
              }
              // highlight title and content
              function highlightKeyword(text, slice) {
                var result = '';
                var prevEnd = slice.start;
                slice.hits.forEach(function (hit) {
                  result += text.substring(prevEnd, hit.position);
                  var end = hit.position + hit.length;
                  result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                  prevEnd = end;
                });
                result += text.substring(prevEnd, slice.end);
                return result;
              }
              var resultItem = '';

              // if (slicesOfTitle.length != 0) {   resultItem += "<li><a target='_blank' href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>"; } else {   resultItem += "<li><a target='_blank' href='" +
              // articleUrl + "' class='search-result-title'>" + title + "</a>"; } slicesOfContent.forEach(function (slice) {   resultItem += "<a target='_blank' href='" + articleUrl + "'><p class=\"search-result\">" + highlightKeyword(content, slice) +
              // "...</p></a>"; }); resultItem += "</li>";

              if (slicesOfTitle.length != 0) {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</div><time class='search-result-date'>" + dateTime + "</time>";
              } else {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + title + "</div><time class='search-result-date'>" + dateTime + "</time>";
              }
              slicesOfContent.forEach(function (slice) {
                resultItem += "<p class=\"search-result-content\">" + highlightKeyword(content, slice) + "...</p>";
              });
              resultItem += "</div><div class='search-result-right'><img class='media-image' src='" + imgUrl + "' width='64px' height='48px'></img></div></a>";

              resultItems.push({item: resultItem, searchTextCount: searchTextCount, hitCount: hitCount, id: resultItems.length});
            }
          })
        };

        if (keywords.length === 1 && keywords[0] === "") {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else if (resultItems.length === 0) {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else {
          resultItems.sort(function (resultLeft, resultRight) {
            if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
              return resultRight.searchTextCount - resultLeft.searchTextCount;
            } else if (resultLeft.hitCount !== resultRight.hitCount) {
              return resultRight.hitCount - resultLeft.hitCount;
            } else {
              return resultRight.id - resultLeft.id;
            }
          });
          var searchResultList = '<div class=\"search-result-list\">';
          resultItems.forEach(function (result) {
            searchResultList += result.item;
          })
          searchResultList += "</div>";
          resultContent.innerHTML = searchResultList;
        }
      }
      if ('auto' === 'auto') {
        input.addEventListener('input', inputEventFunction);
      } else {
        $('.search-icon').click(inputEventFunction);
        input.addEventListener('keypress', function (event) {
          if (event.keyCode === 13) {
            inputEventFunction();
          }
        });
      }
      // remove loading animation
      $('body').css('overflow', '');
      proceedsearch();
    }
    // handle and trigger popup window;
    $('.popup-trigger').click(function (e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc('local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });
    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function (e) {
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 && $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });

    document.addEventListener('mouseup', (e) => {
      var _con = document.querySelector(".local-search-content");
      if (_con) {
        if (!_con.contains(e.target)) {
          onPopupClose();
        }
      }
    });
  </script>


		
	</body>
</html>
